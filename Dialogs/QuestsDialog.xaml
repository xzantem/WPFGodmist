<Window x:Class="GodmistWPF.Dialogs.QuestsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Quest Log" Height="700" Width="900"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}">
    
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        
        <!-- Header -->
        <TextBlock Grid.Row="0" 
                   Text="Quest Log" 
                   Style="{DynamicResource MaterialDesignHeadline5TextBlock}"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,15"/>
        
        <!-- Quests Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="400"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Quest Categories and List -->
            <materialDesign:Card Grid.Column="0" Margin="0,0,10,0" Padding="0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Category Tabs -->
                    <TabControl x:Name="QuestTabs" Grid.Row="1" BorderThickness="0" Background="Transparent">
                        <TabItem Header="In Progress" Style="{StaticResource MaterialDesignTabItem}">
                            <ListBox x:Name="InProgressQuestsList" 
                                     Style="{StaticResource MaterialDesignListBox}"
                                     DisplayMemberPath="DisplayName"
                                     SelectionChanged="QuestList_SelectionChanged"
                                     Background="Transparent"/>
                        </TabItem>
                        <TabItem Header="Completed" Style="{StaticResource MaterialDesignTabItem}">
                            <ListBox x:Name="CompletedQuestsList" 
                                     Style="{StaticResource MaterialDesignListBox}"
                                     DisplayMemberPath="DisplayName"
                                     SelectionChanged="QuestList_SelectionChanged"
                                     Background="Transparent"/>
                        </TabItem>
                        <TabItem Header="Handed In" Style="{StaticResource MaterialDesignTabItem}">
                            <ListBox x:Name="HandedInQuestsList" 
                                     Style="{StaticResource MaterialDesignListBox}"
                                     DisplayMemberPath="DisplayName"
                                     SelectionChanged="QuestList_SelectionChanged"
                                     Background="Transparent"/>
                        </TabItem>
                    </TabControl>
                </Grid>
            </materialDesign:Card>
            
            <!-- Right Panel - Quest Details or No Selection -->
            <Grid Grid.Column="1">
                <!-- No Quest Selected -->
                <TextBlock x:Name="NoQuestSelectedText" 
                           Text="Select a quest to view details"
                           Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextAlignment="Center"
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           Visibility="Visible"/>
                
                <!-- Quest Details -->
                <materialDesign:Card x:Name="QuestDetailsPanel" 
                                   Padding="15"
                                   Visibility="Collapsed">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                    
                        <!-- Quest Header -->
                        <StackPanel Grid.Row="0">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock x:Name="QuestTitle" 
                                           Style="{DynamicResource MaterialDesignHeadline6TextBlock}"
                                           TextWrapping="Wrap"/>
                                <TextBlock x:Name="QuestLevel"
                                           Style="{StaticResource MaterialDesignBody2TextBlock}"
                                           Foreground="{DynamicResource PrimaryHueMidBrush}"
                                           Margin="10,0,0,0"
                                           VerticalAlignment="Bottom"/>
                            </StackPanel>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,5,0,5">
                                <TextBlock Text="Status: " Style="{StaticResource MaterialDesignBody2TextBlock}" Foreground="{DynamicResource MaterialDesignBody}"/>
                                <TextBlock x:Name="QuestStatus" Style="{StaticResource MaterialDesignBody2TextBlock}" Margin="5,0,15,0"/>
                                
                                <TextBlock Text="Type: " Style="{StaticResource MaterialDesignBody2TextBlock}" Foreground="{DynamicResource MaterialDesignBody}"/>
                                <TextBlock x:Name="QuestType" Style="{StaticResource MaterialDesignBody2TextBlock}" Margin="5,0,15,0"/>
                            </StackPanel>
                            
                            <!-- Quest Ender Info (for completed quests) -->
                            <TextBlock x:Name="QuestEnderText"
                                     Style="{StaticResource MaterialDesignBody2TextBlock}"
                                     FontStyle="Italic"
                                     Foreground="#4CAF50"
                                     Margin="0,0,0,5"
                                     TextWrapping="Wrap"
                                     Visibility="Collapsed"/>
                        </StackPanel>
                        
                        <!-- Quest Description and Objectives -->
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="0,15,0,15">
                            <StackPanel>
                                <TextBlock x:Name="QuestDescription" 
                                           Style="{DynamicResource MaterialDesignBody1TextBlock}"
                                           TextWrapping="Wrap"
                                           Margin="0,0,0,15"/>
                                
                                <TextBlock x:Name="ObjectivesHeader" 
                                           Text="Objectives:" 
                                           Style="{DynamicResource MaterialDesignSubtitle2TextBlock}"
                                           Margin="0,0,0,5"/>
                                
                                <ItemsControl x:Name="ObjectivesList"
                                             Margin="15,0,0,0">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" Margin="0,2,0,2">
                                                <TextBlock Text="â€¢ " VerticalAlignment="Center"/>
                                                <TextBlock Text="{Binding Description}" TextWrapping="Wrap"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                
                                <TextBlock x:Name="RewardsHeader" 
                                           Text="Rewards:" 
                                           Style="{DynamicResource MaterialDesignSubtitle2TextBlock}"
                                           Margin="0,15,0,5"
                                           Visibility="Collapsed"/>
                                
                                <StackPanel x:Name="RewardsPanel" 
                                            Margin="15,0,0,0"
                                            Visibility="Collapsed">
                                    <StackPanel.Resources>
                                        <Style TargetType="TextBlock" BasedOn="{StaticResource MaterialDesignBody2TextBlock}">
                                            <Setter Property="Margin" Value="0,2,0,2"/>
                                        </Style>
                                    </StackPanel.Resources>
                                    <TextBlock x:Name="GoldReward"/>
                                    <TextBlock x:Name="ExpReward"/>
                                    <TextBlock x:Name="ItemReward"/>
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>
                        
                        <!-- Quest Giver and Location -->
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                            <TextBlock x:Name="QuestGiver" 
                                       Style="{DynamicResource MaterialDesignCaptionTextBlock}"
                                       Margin="0,0,15,0"/>
                        </StackPanel>
                    </Grid>
                </materialDesign:Card>
            </Grid>
        </Grid>
    </Grid>
</Window>